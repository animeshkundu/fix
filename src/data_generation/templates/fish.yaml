# Fish shell command templates for training data generation
# Fish has unique syntax that differs from bash/zsh

shell: fish
weight: 0.05  # 5% of total data

# Fish-specific syntax differences from bash
# - No $() for command substitution, use (command) or $(command)
# - Variables set with `set`, not export
# - Abbreviations instead of aliases (abbr vs alias)
# - end keyword for blocks instead of done/fi

# Variable operations
variables:
  - correct: "set {var} {value}"
    errors:
      - "export {var}={value}"  # Bash style
      - "{var}={value}"  # Bash style
      - "set {var}={value}"  # Wrong fish syntax
    natural_language:
      - "set variable {var}"
      - "create variable {var}"

  - correct: "set -x {var} {value}"
    errors:
      - "export {var}={value}"  # Bash style
      - "set -e {var} {value}"
    natural_language:
      - "set environment variable {var}"
      - "export {var}"

  - correct: "set -e {var}"
    errors:
      - "unset {var}"  # Bash style
      - "set {var}"
    natural_language:
      - "unset {var}"
      - "remove variable {var}"

  - correct: "set -l {var} {value}"
    errors:
      - "local {var}={value}"  # Bash style
    natural_language:
      - "local variable {var}"

  - correct: "echo $PATH"
    errors:
      - "echo ${PATH}"  # Bash style works but fish prefers $PATH
    natural_language:
      - "show path"

  - correct: "set -gx PATH {path} $PATH"
    errors:
      - "export PATH={path}:$PATH"  # Bash style
      - "PATH={path}:$PATH"  # Bash style
    natural_language:
      - "add to path"
      - "prepend to path"

# Command substitution
command_substitution:
  - correct: "echo (date)"
    errors:
      - "echo `date`"  # Bash backticks don't work
      - "echo $(date)"  # Works in recent fish
    natural_language:
      - "print current date"

  - correct: "set result (command)"
    errors:
      - "result=$(command)"  # Bash style
      - "set result `command`"  # Bash backticks
    natural_language:
      - "capture command output"

# Control structures
control:
  - correct: "if test -f {file}\n    echo exists\nend"
    errors:
      - "if [ -f {file} ]; then echo exists; fi"  # Bash style
      - "if test -f {file}; echo exists; end"  # Missing newlines
    natural_language:
      - "if file exists"

  - correct: "for f in *.txt\n    echo $f\nend"
    errors:
      - "for f in *.txt; do echo $f; done"  # Bash style
      - "for f in *.txt do echo $f done"  # Wrong fish
    natural_language:
      - "loop through txt files"

  - correct: "while true\n    echo loop\nend"
    errors:
      - "while true; do echo loop; done"  # Bash style
    natural_language:
      - "infinite loop"

  - correct: "switch {var}\n    case value\n        echo matched\nend"
    errors:
      - "case {var} in value) echo matched ;; esac"  # Bash style
    natural_language:
      - "switch case"

# Functions
functions:
  - correct: "function {name}\n    {body}\nend"
    errors:
      - "function {name}() { {body}; }"  # Bash style
      - "{name}() { {body}; }"  # Bash style
    natural_language:
      - "define function {name}"

  - correct: "functions"
    errors:
      - "declare -F"  # Bash style
    natural_language:
      - "list functions"

  - correct: "functions -e {name}"
    errors:
      - "unset -f {name}"  # Bash style
    natural_language:
      - "remove function {name}"

# Abbreviations (fish-specific)
abbreviations:
  - correct: "abbr -a {name} {command}"
    errors:
      - "alias {name}='{command}'"  # Bash style
      - "alias {name} {command}"
    natural_language:
      - "create abbreviation"
      - "add shortcut"

  - correct: "abbr -e {name}"
    errors:
      - "unalias {name}"  # Bash style
    natural_language:
      - "remove abbreviation"

  - correct: "abbr"
    errors:
      - "alias"  # Bash style
    natural_language:
      - "list abbreviations"

# Navigation (mostly same as bash)
navigation:
  - correct: "cd {path}"
    errors:
      - "cd{path}"
    natural_language:
      - "go to {path}"

  - correct: "cd -"
    errors:
      - "cd $OLDPWD"  # Bash style (doesn't exist in fish)
    natural_language:
      - "previous directory"

  - correct: "prevd"
    errors:
      - "popd"  # Different in fish
    natural_language:
      - "go to previous directory in stack"

  - correct: "nextd"
    errors:
      - "pushd"  # Different in fish
    natural_language:
      - "go to next directory in stack"

  - correct: "dirh"
    errors:
      - "dirs"  # Different in fish
    natural_language:
      - "directory history"

# File operations (same as bash)
file_operations:
  - correct: "ls -la"
    errors:
      - "ls -al"
      - "sl -la"
    natural_language:
      - "list all files"

  - correct: "cat {file}"
    errors:
      - "cta {file}"
    natural_language:
      - "show {file}"

  - correct: "cp -r {src} {dst}"
    errors:
      - "cp {src} {dst}"
    natural_language:
      - "copy directory"

  - correct: "rm -rf {path}"
    errors:
      - "rm {path}"
    natural_language:
      - "force delete"

# Search
search:
  - correct: "find . -name '{pattern}'"
    errors:
      - "find -name '{pattern}'"
    natural_language:
      - "find files"

  - correct: "grep -r '{pattern}' ."
    errors:
      - "gerp -r '{pattern}' ."
    natural_language:
      - "search in files"

# Process management
processes:
  - correct: "ps aux"
    errors:
      - "ps -aux"
    natural_language:
      - "list processes"

  - correct: "kill %1"
    errors:
      - "kill %job1"  # Wrong syntax
    natural_language:
      - "kill job 1"

  - correct: "jobs"
    errors:
      - "bg"  # Different command
    natural_language:
      - "list background jobs"

# Fish-specific utilities
fish_specific:
  - correct: "fish_config"
    errors:
      - "fish-config"
    natural_language:
      - "configure fish"
      - "open fish configuration"

  - correct: "fish_update_completions"
    errors:
      - "fish-update-completions"
    natural_language:
      - "update completions"

  - correct: "set_color {color}"
    errors:
      - "tput setaf"  # Bash style
    natural_language:
      - "set terminal color"

  - correct: "string match -r '{pattern}' {string}"
    errors:
      - "[[ {string} =~ {pattern} ]]"  # Bash style
    natural_language:
      - "regex match"

  - correct: "string split '{delimiter}' {string}"
    errors:
      - "IFS='{delimiter}' read -ra arr <<< {string}"  # Bash style
    natural_language:
      - "split string"

  - correct: "math '{expression}'"
    errors:
      - "$(( {expression} ))"  # Bash style
      - "expr {expression}"  # Bash style
    natural_language:
      - "calculate"
      - "math expression"

# Git (same as bash)
git:
  - correct: "git status"
    errors:
      - "gti status"
    natural_language:
      - "git status"

  - correct: "git add ."
    errors:
      - "git add"
    natural_language:
      - "stage all"

  - correct: "git commit -m '{message}'"
    errors:
      - "git commit '{message}'"
    natural_language:
      - "commit"

  - correct: "git push origin {branch}"
    errors:
      - "git push"
    natural_language:
      - "push"

# Package management
packages:
  - correct: "sudo apt install {package}"
    errors:
      - "apt install {package}"
    natural_language:
      - "install {package}"

  - correct: "brew install {package}"
    errors:
      - "brew instal {package}"
    natural_language:
      - "install with brew"

# Redirection (same as bash but some differences)
redirection:
  - correct: "command 2>&1"
    errors:
      - "command 2>1"  # Missing &
    natural_language:
      - "redirect stderr to stdout"

  - correct: "command > {file} 2>&1"
    errors:
      - "command &> {file}"  # Bash style doesn't work in fish
    natural_language:
      - "redirect all output to file"

  - correct: "command | tee {file}"
    errors:
      - "command > {file} && cat {file}"
    natural_language:
      - "output to file and screen"
